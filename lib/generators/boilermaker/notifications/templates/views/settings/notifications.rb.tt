# frozen_string_literal: true

module Views
  module Settings
    class Notifications < Views::Base
      include Phlex::Rails::Helpers::FormWith
      include Phlex::Rails::Helpers::LinkTo

      def initialize(notification_preferences: {})
        @preferences = notification_preferences
      end

      def view_template
        page_with_title("Notification Settings") do
          div(class: "max-w-xl") do
            back_link
            header_section
            preferences_form
          end
        end
      end

      private

      def back_link
        div(class: "mb-4") do
          link_to "â† Back to Settings", settings_path, class: "text-sm text-muted hover:text-body"
        end
      end

      def header_section
        div(class: "mb-6") do
          h1(class: "font-bold text-base-content") { "Notification Preferences" }
          p(class: "text-sm text-base-content/70 mt-1") do
            plain "Control how and when you receive notifications"
          end
        end
      end

      def preferences_form
        # This is a placeholder - implement based on your notification types
        render Components::Card.new(title: "Email Notifications", header_color: :primary) do
          div(class: "space-y-4") do
            p(class: "text-sm text-base-content/70") do
              plain "Configure which notifications are sent to your email."
            end

            p(class: "text-sm text-muted italic") do
              plain "Notification preferences will be added as you create more notification types."
            end
          end
        end
      end
    end
  end
end
